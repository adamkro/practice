<!DOCTYPE html>
<html>
  <head>
    <title>Poli</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <link href="./style.css" rel="stylesheet" type="text/css">
  </head>

  <body>
    <div class="row center">
       <h1 class="center">♥ Poli Sewing ♥</h1>
    </div>
    <div id="galery" class="carousel slide w-75" data-ride="carousel">
      <div id="car_div" class="carousel-inner" align="center">
        <!-- carousel items -->
        <div class="carousel-item active">
          <img class="d-block w-100 mh-20" src="./assets/c1.jpeg" alt="First slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="./assets/c3.jpeg" alt="Third slide">
        </div>
      </div>
       <!-- Controls -->
      <a class="carousel-control-prev" href="#galery" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#galery" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <input type="button" onclick="callForImages()" value="Load" />

<script>

    //The div element that will contain the images
    var carousel = document.getElementById("car_div");
    //Makes an asynch request, loading the getimages.php file
    function callForImages() {
        //Create the request object
        var httpReq = (window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");
        //When it loads,
        httpReq.onload = function() {
            //Convert the result back into JSON
            var result = JSON.parse(httpReq.responseText);
            //Show the images
            loadImages(result);
        }
        //Request the page
        try {
            httpReq.open("GET", "getimages.php", true);
            httpReq.send(null);
        } catch(e) {
            console.log(e);
        }
    }
    //Generates the images and sticks them in the container
    function loadImages(images) {
        //For each image,
        for(var i = 0; i < images.length; i++) {
            //Make a new image element, setting the source to the source in the array
            var newDiv = document.createElement("div");
            newDiv.classList.add("carousel-item");
            var newImage = document.createElement("img");
            newImage.setAttribute("src", images[i]);
            newImage.classList.add("d-block")
            newImage.classList.add("w-100")
            //Add it to the container
            carousel.appendChild(newDiv);
            newDiv.appendChild(newImage);
        }
    }
    </script>
  </body>
</html>
